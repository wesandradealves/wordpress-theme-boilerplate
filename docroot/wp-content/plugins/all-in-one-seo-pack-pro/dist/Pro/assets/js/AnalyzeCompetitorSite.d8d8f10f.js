import{o as L,c as I,u as w,C as k,n as R,k as O}from"./links.138c5ae5.js";import"./default-i18n.cb62c1e5.js";import{u as z,S as C}from"./SeoSiteScore.8eda55b0.js";import{r as l,o as m,c as u,g as c,w as h,d as b,e as v,B,a as r,y as a,C as y,b as g,F as D,D as N}from"./vue.runtime.esm-bundler.a2ae84e1.js";import{_ as A}from"./_plugin-vue_export-helper.d7c6d548.js";import{S as V}from"./index.63c9ec9d.js";import"./Caret.833cbb47.js";/* empty css                                            *//* empty css                                              */import"./constants.3cff9bad.js";import{t as F}from"./isArrayLikeObject.7cab3d31.js";/* empty css                                              */import{C as M,a as P}from"./Score.c46ba3ac.js";import{p as j}from"./popup.6fe74774.js";import{C as H}from"./Blur.718f6c18.js";import{C as T}from"./Card.c35b3a6c.js";import{C as K}from"./SeoSiteAnalysisResults.0bbf6b92.js";import{C as W}from"./Index.bd2edb44.js";import{S as G}from"./Refresh.6c1a0eff.js";import"./params.f0608262.js";import"./Tooltip.f932ed03.js";import"./Slide.b264e916.js";import"./Tags.cb9fce76.js";import"./tags.8f0eae2d.js";import"./postContent.93cffc0f.js";import"./cleanForSlug.e0a12587.js";import"./toString.55d4b1ab.js";import"./_baseTrim.8725856f.js";import"./_stringToArray.4de3b1f3.js";import"./deburr.7ab38f88.js";import"./html.7b614668.js";import"./get.3ac6bf22.js";import"./GoogleSearchPreview.f6ab0b5b.js";import"./Information.4f2d4b14.js";import"./Gear.4a41a4ff.js";import"./Index.21f53d84.js";const q={setup(){const{strings:e}=z();return{connectStore:L(),licenseStore:I(),rootStore:w(),strings:e}},components:{CoreBlur:H,CoreCard:T},mixins:[C],data(){return{score:0}},methods:{openPopup(e){j(e,this.connectWithAioseo,600,630,!0,["token"],this.completedCallback,()=>{})},completedCallback(e){return this.connectStore.saveConnectToken(e.token)}}},J={key:0,class:"aioseo-seo-site-score-cta"},Y=["href"];function Q(e,i,s,o,t,n){const d=l("core-card");return m(),u("div",null,[c(d,{slug:"analyzeNewCompetitor","hide-header":"","no-slide":"",toggles:!1},{default:h(()=>[(m(),b(B(o.licenseStore.licenseKey?"div":"core-blur"),null,{default:h(()=>[v(e.$slots,"default")]),_:3})),o.licenseStore.licenseKey?g("",!0):(m(),u("div",J,[r("a",{href:o.rootStore.aioseo.urls.aio.settings},a(o.strings.enterLicenseKey),9,Y),y(" "+a(o.strings.toAnalyzeCompetitorSite),1)]))]),_:3}),o.licenseStore.licenseKey?v(e.$slots,"competitor-results",{key:0}):g("",!0)])}const X=A(q,[["render",Q]]);const Z={setup(){const{strings:e}=z();return{analyzerStore:k(),composableStrings:e}},components:{CoreSiteScore:W,SvgRefresh:G},mixins:[C],props:{score:Number,loading:Boolean,site:{type:String,required:!0},summary:{type:Object,default(){return{}}},mobileSnapshot:String},data(){return{isAnalyzing:!1,strings:R(this.composableStrings,{criticalIssues:this.$t.__("Important Issues",this.$td),warnings:this.$t.__("Warnings",this.$td),recommendedImprovements:this.$t.__("Recommended Improvements",this.$td),goodResults:this.$t.__("Good Results",this.$td),completeSiteAuditChecklist:this.$t.__("Complete Site Audit Checklist",this.$td),refreshResults:this.$t.__("Refresh Results",this.$td),mobileSnapshot:this.$t.__("Mobile Snapshot",this.$td)})}},methods:{refresh(){this.isAnalyzing=!0,this.analyzerStore.runSiteAnalyzer({url:this.site,refresh:!0}).then(()=>this.isAnalyzing=!1)}}},ee={class:"aioseo-site-score-competitor"},te={class:"aioseo-seo-site-score-score"},se={class:"aioseo-seo-site-score-recommendations"},oe={class:"critical"},re={class:"round red"},ie={class:"recommended"},ne={class:"round blue"},ae={class:"good"},le={class:"round green"},ce={key:0,class:"mobile-snapshot"},me=["src"];function he(e,i,s,o,t,n){const d=l("core-site-score"),S=l("svg-refresh"),f=l("base-button");return m(),u("div",ee,[r("div",te,[c(d,{loading:t.isAnalyzing||s.loading,score:s.score,description:e.description},null,8,["loading","score","description"])]),r("div",se,[r("div",oe,[r("span",re,a(s.summary.critical||0),1),y(" "+a(t.strings.criticalIssues),1)]),r("div",ie,[r("span",ne,a(s.summary.recommended||0),1),y(" "+a(t.strings.recommendedImprovements),1)]),r("div",ae,[r("span",le,a(s.summary.good||0),1),y(" "+a(t.strings.goodResults),1)])]),c(f,{class:"refresh-results",type:"gray",size:"small",onClick:n.refresh,loading:t.isAnalyzing},{default:h(()=>[c(S),y(" "+a(t.strings.refreshResults),1)]),_:1},8,["onClick","loading"]),s.mobileSnapshot?(m(),u("div",ce,[r("div",null,a(t.strings.mobileSnapshot),1),r("img",{alt:"Mobile Snapshot",src:s.mobileSnapshot},null,8,me)])):g("",!0)])}const ue=A(Z,[["render",he]]);const pe={setup(){const{strings:e}=z();return{analyzerStore:k(),settingsStore:O(),composableStrings:e}},components:{CoreAnalyze:M,CoreAnalyzeScore:P,CoreAnalyzeCompetitorSiteHeader:X,CoreCard:T,CoreSeoSiteAnalysisResults:K,CoreSiteScoreCompetitor:ue,SvgTrash:V},mixins:[C],data(){return{score:0,competitorUrl:null,isAnalyzing:!1,inputError:!1,competitorResults:{},analyzeTime:8,strings:R(this.composableStrings,{enterCompetitorUrl:this.$t.__("Enter Competitor URL",this.$td),performInDepthAnalysis:this.$t.__("Perform in-depth SEO Analysis of your competitor's website.",this.$td),analyze:this.$t.__("Analyze",this.$td),pleaseEnterValidUrl:this.$t.__("Please enter a valid URL.",this.$td)})}},watch:{"analyzerStore.analyzeError"(e){e&&(this.isAnalyzing=!1)}},computed:{getError(){switch(this.analyzerStore.analyzeError){case"invalid-url":return this.$t.__("The URL provided is invalid.",this.$td);case"missing-content":return this.$t.sprintf("%1$s %2$s",this.$t.__("We were unable to parse the content for this site.",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"seoAnalyzerIssues",!0));case"invalid-token":return this.$t.sprintf(this.$t.__("Your site is not connected. Please connect to %1$s, then try again.",this.$td),"AIOSEO")}return this.analyzerStore.analyzeError}},methods:{parseResults(e){return JSON.parse(e)},getSummary(e){return{recommended:this.analyzerStore.recommendedCount(e),critical:this.analyzerStore.criticalCount(e),good:this.analyzerStore.goodCount(e)}},startAnalyzing(e){if(this.inputError=!1,this.competitorUrl=e.replace("http://","https://"),this.competitorUrl.startsWith("https://")||(this.competitorUrl="https://"+this.competitorUrl),!F(this.competitorUrl)){this.inputError=!0;return}this.analyzerStore.analyzing=!0,this.analyzerStore.analyzeError=!1,this.analyzerStore.runSiteAnalyzer({url:this.competitorUrl}),this.isAnalyzing=!0,setTimeout(this.checkStatus,this.analyzeTime*1e3),this.closeAllCards()},checkStatus(){if(this.isAnalyzing=!1,this.analyzerStore.analyzing){this.$nextTick(()=>{this.isAnalyzing=!0,2>this.analyzeTime&&(this.analyzeTime=8),this.analyzeTime=this.analyzeTime/2,setTimeout(this.checkStatus,this.analyzeTime*1e3)});return}this.competitorUrl=null,this.competitorResults=this.analyzerStore.getCompetitorSiteAnalysisResults,this.toggleFirstCard(),this.$nextTick(()=>{const e=Object.keys(this.competitorResults),i=document.querySelector(".aioseo-header"),s=i.offsetHeight+i.offsetTop+30;this.$scrollTo("#aioseo-competitor-results"+this.hashCode(e[0]),{offset:-s})})},startDeleteSite(e){this.closeAllCards(),delete this.competitorResults[e],this.analyzerStore.deleteCompetitorSite(e).then(()=>{this.competitorResults=this.analyzerStore.getCompetitorSiteAnalysisResults})},closeAllCards(){Object.keys(this.competitorResults).forEach(i=>{this.settingsStore.closeCard("analyzeCompetitorSite"+i)})},toggleFirstCard(){const e=Object.keys(this.competitorResults);this.settingsStore.toggleCard({slug:"analyzeCompetitorSite"+e[0]})},hashCode(e){if(!e)return;let i=0,s,o;for(s=0;s<e.length;s++)o=e.charCodeAt(s),i=(i<<5)-i+o,i|=0;return i}},mounted(){this.analyzerStore.analyzeError=!1,this.competitorResults=this.analyzerStore.getCompetitorSiteAnalysisResults,this.toggleFirstCard()}},de={class:"aioseo-analyze-competitor-site"},_e={key:0,class:"aioseo-description aioseo-error"},ye=["innerHTML"],ge={class:"competitor-results-main"},Se={class:"competitor-results-body"};function fe(e,i,s,o,t,n){const d=l("core-analyze"),S=l("core-analyze-score"),f=l("svg-trash"),E=l("core-site-score-competitor"),$=l("core-seo-site-analysis-results"),U=l("core-card"),x=l("core-analyze-competitor-site-header");return m(),u("div",de,[c(x,null,{"competitor-results":h(()=>[(m(!0),u(D,null,N(t.competitorResults,(_,p)=>(m(),b(U,{key:p,id:"aioseo-competitor-results"+n.hashCode(p),slug:"analyzeCompetitorSite"+p,"save-toggle-status":!1},{header:h(()=>[c(S,{score:n.parseResults(_).score},null,8,["score"]),r("span",null,a(p),1),c(f,{onClick:ze=>n.startDeleteSite(p)},null,8,["onClick"])]),default:h(()=>[r("div",ge,[c(E,{site:p,score:n.parseResults(_).score,loading:o.analyzerStore.analyzing,summary:n.getSummary(n.parseResults(_).results),"mobile-snapshot":n.parseResults(_).results.advanced.mobileSnapshot},null,8,["site","score","loading","summary","mobile-snapshot"]),r("div",Se,[c($,{section:"all-items","all-results":n.parseResults(_).results,"show-google-preview":""},null,8,["all-results"])])])]),_:2},1032,["id","slug"]))),128))]),default:h(()=>[c(d,{header:t.strings.enterCompetitorUrl,description:t.strings.performInDepthAnalysis,inputError:t.inputError,isAnalyzing:t.isAnalyzing,analyzeTime:t.analyzeTime,placeholder:"https://competitorwebsite.com",onStartAnalyzing:n.startAnalyzing},{errors:h(()=>[t.inputError?(m(),u("div",_e,a(t.strings.pleaseEnterValidUrl),1)):g("",!0),o.analyzerStore.analyzer==="competitor-site"&&o.analyzerStore.analyzeError?(m(),u("div",{key:1,class:"analyze-errors aioseo-description aioseo-error",innerHTML:o.analyzerStore.analyzeError},null,8,ye)):g("",!0)]),_:1},8,["header","description","inputError","isAnalyzing","analyzeTime","onStartAnalyzing"])]),_:1})])}const ot=A(pe,[["render",fe]]);export{ot as default};
