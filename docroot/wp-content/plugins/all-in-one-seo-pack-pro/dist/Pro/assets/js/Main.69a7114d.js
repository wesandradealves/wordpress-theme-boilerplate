import{o as a,c as l,a as n,r as h,C as u,y as m,f,F as w,D as k,K as C,O as A,g as p,z as U,e as P,b as v,P as j,J as H,n as z,M as F,N as E,d as $,w as b,S as K,u as y,E as W}from"./vue.runtime.esm-bundler.a2ae84e1.js";import{i as S,b as q,K as B,c as G}from"./links.138c5ae5.js";import{q as X}from"./isArrayLikeObject.7cab3d31.js";import{g as J}from"./params.f0608262.js";import{_ as g}from"./_plugin-vue_export-helper.d7c6d548.js";import{C as M}from"./index.63c9ec9d.js";import{C as D}from"./Caret.833cbb47.js";import{U as L,R as Y}from"./UserAvatar.a5af6983.js";import{t as Z}from"./html.7b614668.js";import{a as I}from"./strings.b7f040f8.js";/* empty css                                            *//* empty css                                              */import"./default-i18n.cb62c1e5.js";import"./constants.3cff9bad.js";import{I as Q}from"./Image.dea86519.js";import{o as ee,t as te,S as se}from"./Upsell.57078aed.js";/* empty css                                              */import{C as ie}from"./Blur.718f6c18.js";import"./Profile.951fd37d.js";import"./isString.d9467ca2.js";import"./postContent.93cffc0f.js";import"./cleanForSlug.e0a12587.js";import"./toString.55d4b1ab.js";import"./_baseTrim.8725856f.js";import"./_stringToArray.4de3b1f3.js";import"./deburr.7ab38f88.js";import"./get.3ac6bf22.js";import"./Index.a392ec8a.js";import"./Row.eead99c7.js";import"./RequiredPlans.57b9c43d.js";import"./addons.3740efb6.js";import"./upperFirst.fa56af60.js";import"./license.ff32fc77.js";const oe={},ne={viewBox:"0 0 24 25",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-slider-handle",fill:"none"},re=n("ellipse",{cx:"12.157",cy:"12.5",rx:"11.657",ry:"12",fill:"#B4B5B7"},null,-1),ae=n("circle",{cx:"12.157",cy:"12.157",r:"10.971",fill:"#F4F6F6"},null,-1),de=n("path",{d:"m13.529 15.586v-7.2l4.68 3.6-4.68 3.6z",fill:"#33353A"},null,-1),le=n("path",{d:"m11.009 8.3858v7.2l-4.68-3.6 4.68-3.6z",fill:"#33353A"},null,-1),ce=[re,ae,de,le];function me(e,t){return a(),l("svg",ne,ce)}const O=g(oe,[["render",me]]);const _e={setup(){return{seoRevisionsStore:S()}},components:{SvgSliderHandle:O},computed:{activeSliderHandleNode(){return this.activeSliderHandle==="from"?this.$refs.sliderHandleFrom:this.$refs.sliderHandleTo},btnHandleDisabled(){return this.$parent.isFetchingDiff},btnNextDisabled(){return this.$parent.seoRevisionsStore.items[0].id===this.itemTo.id||this.$parent.isFetchingDiff},btnPreviousDisabled(){return this.$parent.seoRevisionsStore.items[this.$parent.seoRevisionsStore.items.length-1].id===this.itemTo.id||this.$parent.isFetchingDiff},checkboxCompareModeDisabled(){return this.$parent.seoRevisionsStore.items[this.$parent.seoRevisionsStore.items.length-1].id===this.itemTo.id||this.$parent.isFetchingDiff},sliderMaxWidth(){const e=Math.min(1e3,this.$parent.seoRevisionsStore.items.length);let t=100;return 1<e&&(t=Math.min(1920,e*49)),`${t}px`}},methods:{abstractFetchDiff(e,t){this.$parent.isFetchingDiff=!0,this.seoRevisionsStore.fetchDiff({fromId:(e==null?void 0:e.id)||0,toId:t.id}).finally(()=>{this.$parent.isFetchingDiff=!1}),this.setHandlePositionByItem(),this.replaceHistoryState()},getMarks(){const e=[];for(const t of this.$refs.marks.querySelectorAll("div"))e.push({left:t.offsetLeft,id:parseInt(t.dataset.id)});return e},onClickBtnNext(){const e=this.$parent.getNextItemById(this.itemTo.id);if(!e)return!1;this.$parent.itemToId=e.id},onClickBtnPrevious(){const e=this.$parent.getPreviousItemById(this.itemTo.id);if(!e)return!1;this.$parent.itemToId=e.id},onClickMarks(e){if(this.$parent.isFetchingDiff)return!1;this.setItemIdByHandlePosition(this.parseHandlePosition(e.offsetX))},onInputCompareMode(){this.showSliderHandleFrom=!this.showSliderHandleFrom,this.showSliderHandleFrom||(this.activeSliderHandle="to")},onMousedownSliderHandle(){this.isSliderHandleActive=!0,document.addEventListener("mousemove",this.onMousemoveSlider)},onMousemoveSlider(e){const t=this.$refs.slider,s=this.$refs.slider.getBoundingClientRect();let r=Math.max(0,e.clientX-s.left);r=this.parseHandlePosition(r>t.offsetWidth?t.offsetWidth:r),this.activeSliderHandleNode.style.left=`${r}px`},parseHandlePosition(e){if(this.showSliderHandleFrom){const t=this.activeSliderHandleNode.offsetWidth/2;if(this.activeSliderHandle==="from"){const s=this.$refs.sliderHandleTo.offsetLeft;s-t<e&&(e=s-t)}else if(this.activeSliderHandle==="to"){const s=this.$refs.sliderHandleFrom.offsetLeft;e<s+t&&(e=s+t)}}return e},replaceHistoryState(){var e;if(window!=null&&window.history.replaceState){const t=new URL(window.location.href),s=t.searchParams;s.delete("from"),s.delete("to"),this.showSliderHandleFrom&&s.append("from",((e=this.itemFrom)==null?void 0:e.id)||0),s.append("to",this.itemTo.id),t.search=s.toString(),window.history.replaceState({},"",t.toString())}},setItemIdByHandlePosition(e){var r,o,i;const s=this.getMarks().reduce((c,d)=>Math.abs(d.left-e)<Math.abs(c.left-e)?d:c);if(this.activeSliderHandle==="from")return s.id>=this.itemTo.id&&(s.id=((r=this.$parent.getPreviousItemById(s.id))==null?void 0:r.id)||0),s.id===(((o=this.itemFrom)==null?void 0:o.id)||0)&&this.setHandlePositionByItem("from"),this.$parent.itemFromId=s.id,!1;this.showSliderHandleFrom&&s.id<=(((i=this.itemFrom)==null?void 0:i.id)||0)&&(s.id=this.$parent.getNextItemById(s.id).id),s.id===this.itemTo.id&&this.setHandlePositionByItem("to"),this.$parent.itemToId=s.id},setHandlePositionByItem(e=null){var o,i;let t=this.activeSliderHandle==="from"?((o=this.itemFrom)==null?void 0:o.id)||0:this.itemTo.id,s=this.activeSliderHandleNode;e==="from"?(t=((i=this.itemFrom)==null?void 0:i.id)||0,s=this.$refs.sliderHandleFrom):e==="to"&&(t=this.itemTo.id,s=this.$refs.sliderHandleTo);const r=this.$refs[`mark-${t}`][0];s.style.left=`${r.offsetLeft}px`}},props:{itemFrom:Object,itemTo:{type:[Object],required:!0}},watch:{itemTo(e){let t=this.itemFrom;this.showSliderHandleFrom||(t=this.$parent.getPreviousItemById(e.id)||null),t!==this.itemFrom&&(this.$parent.itemFromId=(t==null?void 0:t.id)||0),this.abstractFetchDiff(t,e)},itemFrom(e){if(!this.showSliderHandleFrom)return!1;this.$parent.itemFromId=(e==null?void 0:e.id)||0,this.abstractFetchDiff(e,this.itemTo)},showSliderHandleFrom(e){e&&this.setHandlePositionByItem("from");const t=this.$parent.getPreviousItemById(this.itemTo.id);this.$parent.itemFromId=(t==null?void 0:t.id)||0,this.abstractFetchDiff(t,this.itemTo)}},data(){return{activeSliderHandle:"to",isSliderHandleActive:!1,showSliderHandleFrom:!!J().from,strings:{compareTwoRevisions:this.$t.__("Compare any two revisions",this.$tdPro),next:this.$t.__("Next",this.$tdPro),previous:this.$t.__("Previous",this.$tdPro)}}},mounted(){this.setHandlePositionByItem("to"),this.showSliderHandleFrom&&this.setHandlePositionByItem("from"),document.addEventListener("mouseup",()=>{if(!this.isSliderHandleActive)return!1;this.isSliderHandleActive=!1,document.removeEventListener("mousemove",this.onMousemoveSlider),this.setItemIdByHandlePosition(this.activeSliderHandleNode.offsetLeft)})}},he={class:"aioseo-seo-revisions-comparison__controls"},pe={class:"aioseo-seo-revisions-comparison__controls__compare-mode"},ve=["checked","disabled"],ue={class:"aioseo-seo-revisions-comparison__controls__previous"},fe=["disabled"],be=["aria-disabled"],ge=["data-id"],ye=["disabled"],$e=["disabled"],Se={class:"aioseo-seo-revisions-comparison__controls__next"},Ie=["disabled"];function we(e,t,s,r,o,i){const c=h("svg-slider-handle");return a(),l("div",he,[n("div",pe,[n("input",{type:"checkbox",checked:o.showSliderHandleFrom,disabled:i.checkboxCompareModeDisabled,onInput:t[0]||(t[0]=d=>i.onInputCompareMode())},null,40,ve),u(" "+m(o.strings.compareTwoRevisions),1)]),n("div",ue,[n("button",{class:"button",type:"button",disabled:i.btnPreviousDisabled||o.showSliderHandleFrom,onClick:t[1]||(t[1]=f(d=>i.onClickBtnPrevious(),["stop","exact"]))},m(o.strings.previous),9,fe)]),n("div",{ref:"slider",class:"aioseo-seo-revisions-comparison__controls__slider",style:U({"max-width":i.sliderMaxWidth})},[n("div",{ref:"marks",class:"marks",role:"button","aria-disabled":i.btnHandleDisabled,onClick:t[2]||(t[2]=f(d=>i.onClickMarks(d),["stop","exact"]))},[(a(!0),l(w,null,k(e.$parent.seoRevisionsStore.items,d=>(a(),l("div",{"data-id":d.id,ref_for:!0,ref:`mark-${d.id}`,key:d.id},null,8,ge))),128))],8,be),C(n("button",{ref:"sliderHandleFrom",class:"aioseo-seo-revisions-comparison__controls__slider__handle from",tabindex:"0",onMousedown:t[3]||(t[3]=f(d=>{o.activeSliderHandle="from",i.onMousedownSliderHandle()},["prevent"])),disabled:i.btnHandleDisabled},[p(c)],40,ye),[[A,o.showSliderHandleFrom]]),n("button",{ref:"sliderHandleTo",class:"aioseo-seo-revisions-comparison__controls__slider__handle to",tabindex:"0",onMousedown:t[4]||(t[4]=f(d=>{o.activeSliderHandle="to",i.onMousedownSliderHandle()},["prevent"])),disabled:i.btnHandleDisabled},[p(c)],40,$e)],4),n("div",Se,[n("button",{class:"button",type:"button",disabled:i.btnNextDisabled||o.showSliderHandleFrom,onClick:t[5]||(t[5]=f(d=>i.onClickBtnNext(),["stop","exact"]))},m(o.strings.next),9,Ie)])])}const xe=g(_e,[["render",we],["__scopeId","data-v-cc6402b8"]]);const Re={setup(){return{seoRevisionsStore:S()}},components:{CoreLoader:D,UtilUserAvatar:L},methods:{truncate:Z,focusInputNote(){setTimeout(()=>{this.$refs.itemWrapper.querySelector("input").focus()},50)},onBlurInputNote(){this.noteElements.input.value!==this.revision.note?this.updateNote():this.onKeyUpEscInputNote()},onKeyUpEnterInputNote(){this.noteElements.input.value!==this.revision.note&&this.updateNote()},onKeyUpEscInputNote(){this.noteElements.input.value=this.revision.note,this.setNoteElementVisibility("input",!1)},onClickBtnAddNote(){this.setNoteElementVisibility("input",!0),this.setNoteElementVisibility("btnAdd",!1),this.focusInputNote()},onClickBtnEditNote(){this.setNoteElementVisibility("input",!0),this.setNoteElementVisibility("btnEdit",!1),this.focusInputNote()},onFocusItem(){this.onMouseEnterItem()},onMouseEnterItem(){this.isNoteElementVisible("input")||(this.revision.note?this.setNoteElementVisibility("btnEdit",!0):this.setNoteElementVisibility("btnAdd",!0))},onMouseLeaveItem(){this.setNoteElementVisibility("btnAdd",!1),this.setNoteElementVisibility("btnEdit",!1)},isNoteElementVisible(e){return this.noteElements[e].visible},setNoteElementVisibility(e,t){this.noteElements[e].visible=t},updateNote(){this.isUpdating=!0,this.seoRevisionsStore.update({id:this.revision.id,payload:{note:this.noteElements.input.value}}).then(e=>{const t=this.seoRevisionsStore.items.findIndex(s=>s.id===e.body.item.id);this.seoRevisionsStore.items.splice(t,1,e.body.item),this.setNoteElementVisibility("input",!1)}).finally(()=>{this.isUpdating=!1})}},mixins:[Y],props:{revision:{type:Object,default(){return{}}},isCurrentVersion:Boolean},watch:{revision(e){this.noteElements.input.value=e.note}},data(){return{isUpdating:!1,noteElements:{input:{maxlength:this.seoRevisionsStore.noteMaxlength,visible:!1,value:this.revision.note},btnAdd:{visible:!1},btnEdit:{visible:!1}},strings:{currentRevisionBy:this.$t.__("Current Revision by",this.$tdPro),revisionBy:this.$t.__("Revision by",this.$tdPro),addNote:this.$t.__("Add Note",this.$tdPro),editNote:this.$t.__("Edit Note",this.$tdPro),typeToAddNote:this.$t.__("Type to add note",this.$tdPro)}}}},Te=e=>(F("data-v-c4ca7f9c"),e=e(),E(),e),Ne={key:0,class:"aioseo-seo-revisions-comparison__item-meta__col"},He={class:"aioseo-seo-revisions-comparison__item-meta__title"},Pe={class:"aioseo-seo-revisions-comparison__item-meta__col"},ke={class:"aioseo-seo-revisions-comparison__item-meta__author-avatar"},Fe={class:"aioseo-seo-revisions-comparison__item-meta__col"},Ee={class:"aioseo-wrapper"},Ce=["title"],Be=["textContent"],Me=["textContent"],De=Te(()=>n("span",null," ",-1)),Le=["textContent"],Oe={key:0,class:"aioseo-seo-revisions-comparison__item-meta__note"},Ve={class:"text-truncate"},Ae=["maxlength","placeholder"],Ue={class:"aioseo-seo-revisions-comparison__item-meta__date"},je={key:1,class:"aioseo-seo-revisions-comparison__item-meta__col"},ze={key:2,class:"loader"};function Ke(e,t,s,r,o,i){const c=h("util-user-avatar"),d=h("core-loader");return s.revision?(a(),l("div",{key:0,class:z(["aioseo-seo-revisions-comparison__item-meta",{"aioseo-seo-revisions-comparison__item-meta--title-empty":!e.$slots.title}]),tabindex:"0",ref:"itemWrapper",onFocus:t[7]||(t[7]=_=>i.onFocusItem()),onMouseenter:t[8]||(t[8]=_=>i.onMouseEnterItem()),onMouseleave:t[9]||(t[9]=_=>i.onMouseLeaveItem())},[e.$slots.title?(a(),l("div",Ne,[n("div",He,[P(e.$slots,"title",{},void 0,!0)])])):v("",!0),n("div",Pe,[n("div",ke,[p(c,{src:s.revision.author.avatar.url,size:s.revision.author.avatar.size},null,8,["src","size"])])]),n("div",Fe,[n("div",Ee,[n("div",{title:e.getAuthorEmailAndLogin(s.revision),class:"aioseo-seo-revisions-comparison__item-meta__author"},[s.isCurrentVersion?(a(),l("span",{key:0,textContent:m(o.strings.currentRevisionBy)},null,8,Be)):(a(),l("span",{key:1,textContent:m(o.strings.revisionBy)},null,8,Me)),De,n("span",{textContent:m(i.truncate(s.revision.author.display_name,30))},null,8,Le)],8,Ce),s.revision.note&&!i.isNoteElementVisible("input")?(a(),l("div",Oe,[n("span",Ve,m(s.revision.note),1)])):v("",!0),i.isNoteElementVisible("input")?C((a(),l("input",{key:1,type:"text",maxlength:o.noteElements.input.maxlength,placeholder:o.strings.typeToAddNote,"onUpdate:modelValue":t[0]||(t[0]=_=>o.noteElements.input.value=_),onBlur:t[1]||(t[1]=f(_=>i.onBlurInputNote(),["prevent"])),onKeyup:[t[2]||(t[2]=H(f(_=>i.onKeyUpEnterInputNote(),["prevent"]),["enter"])),t[3]||(t[3]=H(f(_=>i.onKeyUpEscInputNote(),["prevent"]),["esc"]))],onKeydown:t[4]||(t[4]=H(f(()=>{},["prevent"]),["enter"]))},null,40,Ae)),[[j,o.noteElements.input.value]]):v("",!0),i.isNoteElementVisible("btnEdit")?(a(),l("button",{key:2,class:"aioseo-seo-revisions-comparison__item-meta__btn-edit-note",onClick:t[5]||(t[5]=f(_=>i.onClickBtnEditNote(),["prevent"]))},m(o.strings.editNote),1)):v("",!0),i.isNoteElementVisible("btnAdd")?(a(),l("button",{key:3,class:"aioseo-seo-revisions-comparison__item-meta__btn-add-note",onClick:t[6]||(t[6]=f(_=>i.onClickBtnAddNote(),["prevent"]))},m(o.strings.addNote),1)):v("",!0)]),n("div",Ue,m(s.revision.date.created_formatted),1)]),e.$slots["btn-restore"]?(a(),l("div",je,[P(e.$slots,"btn-restore",{},void 0,!0)])):v("",!0),o.isUpdating?(a(),l("div",ze,[p(d)])):v("",!0)],34)):v("",!0)}const We=g(Re,[["render",Ke],["__scopeId","data-v-c4ca7f9c"]]);const qe={setup(){return{seoRevisionsStore:S(),tagsStore:q()}},components:{CoreAlert:M},methods:{insertImageSourceLabel(e){const t=e.match(/\{optionValue\|[^}]+/g);return Object.values(t??{}).forEach(s=>{var c;const r=s.split("|")[1],o=I(r);let i=((c=this.getImageSourceOptionFiltered(o))==null?void 0:c.label)||"";i=r.indexOf("<ins>")!==-1?`<ins>${i}</ins>`:i,e=e.replace(`{optionValue|${r}}`,i)}),e},insertImagePreview(e,t=""){let s="img-preview--url",r=this.strings.imgPreviewBasedOnUrl;t.indexOf("twitter")!==-1?(s=" img-preview--twitter",r=this.strings.imgPreviewBasedOnSettings):t.indexOf("og")!==-1&&(s=" img-preview--facebook",r=this.strings.imgPreviewBasedOnSettings);const o=e.match(/\{imageUrl\|[^}]*/g);return Object.values(o??{}).forEach(i=>{const c=i.split("|")[1]||"",d=I(c),_=`<div class="img-preview ${s}"><img src="${d}" loading="lazy" alt="${r}" title="${r}" /></div>`;e=e.replace(`{imageUrl|${c}}`,c?_:"")}),e},insertObjectTypeLabel(e){const t=e.match(/\{optionValue\|[^}]+/g);return Object.values(t??{}).forEach(s=>{const r=s.split("|")[1],o=I(r),i=this.getObjectTypeLabelByOption(o);e=e.replace(`{optionValue|${r}}`,i)}),e},insertTwitterCardLabel(e){const t=e.match(/\{optionValue\|[^}]+/g);return Object.values(t??{}).forEach(s=>{const r=s.split("|")[1],o=I(r),i=this.getTwitterCardLabelByOption(o);e=e.replace(`{optionValue|${r}}`,i)}),e},buildCustomRobotsSetting(e){const t=e.match(/\{.[^}]+}/g);return Object.values(t??{}).forEach(s=>{const[r,o]=s.split("|"),i=r.replace("{",""),c=o.replace("}",""),d=this.strings[`robots${i}`];if(i.match(/maxsnippet|maxvideopreview|maximagepreview/)){e=e.replace(s,`${d}: ${c}`);return}const _=`<input style="opacity:1" type="checkbox" disabled="disabled" ${c?'checked="checked"':""} />`;e=e.replace(s,`<span>${d}:</span> ${_}`)}),e},replaceSmartTags(e){let t=e.match(/#[a-zA-Z0-9_-]{3,}/g);return t&&(t=[...new Set(t)],t.forEach(s=>{const r=this.globalSmartTags.find(o=>o.id===s.replace("#",""));r!=null&&r.name&&(e=e.replaceAll(s,`<span class="tag">${r.name}</span>`))})),e},parseFieldDiff(e,t){return e.indexOf("#")!==-1&&(e=this.replaceSmartTags(e)),(t==="og_image_type"||t==="twitter_image_type")&&(e=this.insertImageSourceLabel(e),e=this.insertImagePreview(e,t)),(t==="og_image_custom_url"||t==="twitter_image_custom_url")&&(e=this.insertImagePreview(e)),t==="og_object_type"&&(e=this.insertObjectTypeLabel(e)),t==="twitter_card"&&(e=this.insertTwitterCardLabel(e)),t==="robots_all_settings"&&(e=this.buildCustomRobotsSetting(e)),e}},mixins:[Q,ee,te],props:{itemFromId:Number,itemToId:Number},data(){return{globalSmartTags:this.tagsStore.tags,strings:{imgPreviewBasedOnSettings:this.$t.__("Image preview based on your current settings",this.$tdPro),imgPreviewBasedOnUrl:this.$t.__("Image URL preview",this.$tdPro),noDifference:this.$t.__("There are no differences between these two revisions.",this.$tdPro),robotsdefault:this.$t.__("Use Default Settings",this.$tdPro),robotsnoindex:this.$t.__("No Index",this.$tdPro),robotsnofollow:this.$t.__("No Follow",this.$tdPro),robotsnoarchive:this.$t.__("No Archive",this.$tdPro),robotsnotranslate:this.$t.__("No Translate",this.$tdPro),robotsnoimageindex:this.$t.__("No Image Index",this.$tdPro),robotsnosnippet:this.$t.__("No Snippet",this.$tdPro),robotsnoodp:this.$t.__("No ODP",this.$tdPro),robotsmaxsnippet:this.$t.__("Max Snippet",this.$tdPro),robotsmaxvideopreview:this.$t.__("Max Video Preview",this.$tdPro),robotsmaximagepreview:this.$t.__("Max Image Preview",this.$tdPro)}}},mounted(){this.$parent.isFetchingDiff=!0,this.seoRevisionsStore.fetchDiff({fromId:this.itemFromId,toId:this.itemToId}).finally(()=>{this.$parent.isFetchingDiff=!1})}},Ge={class:"aioseo-seo-revisions-item-diff"},Xe=["innerHTML"],Je=["innerHTML"];function Ye(e,t,s,r,o,i){const c=h("core-alert");return a(),l("div",Ge,[r.seoRevisionsStore.hasDiff?v("",!0):(a(),$(c,{key:0,type:"yellow"},{default:b(()=>[u(m(o.strings.noDifference),1)]),_:1})),(a(!0),l(w,null,k(r.seoRevisionsStore.seoRevisionsDiff,(d,_)=>(a(),l(w,null,[d.diff||!r.seoRevisionsStore.hasDiff?(a(),l("h3",{key:"label-"+_},m(d.label),1)):v("",!0),r.seoRevisionsStore.hasDiff?(a(),l("div",{innerHTML:i.parseFieldDiff(d.diff,d.key),key:"diff-"+_},null,8,Xe)):v("",!0),r.seoRevisionsStore.hasDiff?v("",!0):(a(),l("div",{innerHTML:i.parseFieldDiff(d.raw,d.key),key:"diff-"+_},null,8,Je))],64))),256))])}const Ze=g(qe,[["render",Ye],["__scopeId","data-v-0b4e2a88"]]);const Qe={setup(){return{seoRevisionsStore:S()}},components:{Controls:xe,CoreAlert:M,CoreLoader:D,ItemMeta:We,ItemsDiff:Ze},data(){var e,t;return{btnRestoreLoading:!1,error:this.seoRevisionsStore.error||null,isFetchingDiff:!1,itemFromId:((e=this.seoRevisionsStore.itemFrom)==null?void 0:e.id)||0,itemToId:(t=this.seoRevisionsStore.itemTo)==null?void 0:t.id,restoreFailed:!1,strings:{compareRevisionsOf:this.$t.__("Compare Revisions of",this.$tdPro),from:this.$t.__("From:",this.$tdPro),goToEditor:this.$t.__("Go to editor",this.$tdPro),pleaseReload:this.$t.__("Something went wrong. Please, reload the page and try again.",this.$tdPro),restoreRevision:this.$t.__("Restore This Revision",this.$tdPro),to:this.$t.__("To:",this.$tdPro)}}},computed:{btnRestoreDisabled(){return this.seoRevisionsStore.items[0].id===this.itemToId},itemIds(){return X(this.seoRevisionsStore.items,"id")},itemFrom(){return this.seoRevisionsStore.items.find(e=>e.id===this.itemFromId)},itemTo(){return this.seoRevisionsStore.items.find(e=>e.id===this.itemToId)}},methods:{getNextItemById(e){const t=this.itemIds.indexOf(e);return this.seoRevisionsStore.items[t-1]||null},getPreviousItemById(e){const t=this.itemIds.indexOf(e);return this.seoRevisionsStore.items[t+1]||null},initRestore(){this.btnRestoreLoading=!0,this.seoRevisionsStore.restore({id:this.itemToId}).then(()=>(window.location.href=this.itemTo.urls.edit_object+"&aioseo-tab=seoRevisions",!1)).catch(()=>{this.restoreFailed=!0,this.btnRestoreLoading=!1})}}},et={key:1,class:"aioseo-seo-revisions-comparison"},tt={class:"long-header"},st={class:"text-truncate"},it=["href"],ot=["href"],nt={class:"aioseo-seo-revisions-comparison__item-meta-wrapper"},rt={class:"aioseo-seo-revisions-comparison__diff"},at={key:0,class:"loader"};function dt(e,t,s,r,o,i){const c=h("core-alert"),d=h("controls"),_=h("item-meta"),R=h("base-button"),T=h("items-diff"),N=h("core-loader");return o.error?(a(),$(c,{key:0,type:"red"},{default:b(()=>[u(m(o.error),1)]),_:1})):(a(),l("div",et,[n("h1",tt,[u(m(o.strings.compareRevisionsOf)+" ",1),n("span",st,[u("  “"),n("a",{href:i.itemTo.urls.edit_object},m(i.itemTo.object.title),9,it),u("” ")])]),n("a",{href:i.itemTo.urls.edit_object},"← "+m(o.strings.goToEditor),9,ot),p(d,{"item-to":i.itemTo,"item-from":i.itemFrom},null,8,["item-to","item-from"]),n("div",nt,[i.itemFrom?(a(),$(_,{key:0,revision:i.itemFrom},{title:b(()=>[u(m(o.strings.from),1)]),_:1},8,["revision"])):v("",!0),p(_,{"is-current-version":o.itemToId===r.seoRevisionsStore.items[0].id,revision:i.itemTo},K({"btn-restore":b(()=>[p(R,{size:"small-table",type:"blue",disabled:i.btnRestoreDisabled,loading:o.btnRestoreLoading,onClick:t[0]||(t[0]=f(V=>i.initRestore(),["exact"]))},{default:b(()=>[u(m(o.strings.restoreRevision),1)]),_:1},8,["disabled","loading"])]),_:2},[i.itemFrom?{name:"title",fn:b(()=>[u(m(o.strings.to),1)]),key:"0"}:void 0]),1032,["is-current-version","revision"])]),o.restoreFailed?(a(),$(c,{key:0,type:"yellow","show-close":"",onCloseAlert:t[1]||(t[1]=V=>o.restoreFailed=!1)},{default:b(()=>[u(m(o.strings.pleaseReload),1)]),_:1})):v("",!0),n("div",rt,[p(T,{"item-from-id":o.itemFromId,"item-to-id":o.itemToId},null,8,["item-from-id","item-to-id"]),o.isFetchingDiff?(a(),l("div",at,[p(N)])):v("",!0)])]))}const lt=g(Qe,[["render",dt],["__scopeId","data-v-8f774480"]]);const ct={components:{SvgSliderHandle:O},data(){return{strings:{compareTwoRevisions:this.$t.__("Compare any two revisions",this.$td),next:this.$t.__("Next",this.$td),previous:this.$t.__("Previous",this.$td)}}}},mt=e=>(F("data-v-28d60966"),e=e(),E(),e),_t={class:"aioseo-seo-revisions-comparison__controls"},ht={class:"aioseo-seo-revisions-comparison__controls__compare-mode"},pt=mt(()=>n("input",{type:"checkbox"},null,-1)),vt={class:"aioseo-seo-revisions-comparison__controls__previous"},ut={class:"button",disabled:""},ft={class:"aioseo-seo-revisions-comparison__controls__slider"},bt={class:"marks"},gt={class:"aioseo-seo-revisions-comparison__controls__slider__handle to",disabled:""},yt={class:"aioseo-seo-revisions-comparison__controls__next"},$t={class:"button",disabled:""};function St(e,t,s,r,o,i){const c=h("svg-slider-handle");return a(),l("div",_t,[n("div",ht,[pt,u(" "+m(o.strings.compareTwoRevisions),1)]),n("div",vt,[n("button",ut,m(o.strings.previous),1)]),n("div",ft,[n("div",bt,[(a(),l(w,null,k(15,d=>n("div",{key:d})),64))]),n("button",gt,[p(c)])]),n("div",yt,[n("button",$t,m(o.strings.next),1)])])}const It=g(ct,[["render",St],["__scopeId","data-v-28d60966"]]);const x=e=>(F("data-v-2c5e7d56"),e=e(),E(),e),wt={class:"aioseo-seo-revisions-comparison__item-meta"},xt={class:"aioseo-seo-revisions-comparison__item-meta__col"},Rt={class:"aioseo-seo-revisions-comparison__item-meta__author-avatar"},Tt={class:"aioseo-seo-revisions-comparison__item-meta__col"},Nt={class:"aioseo-wrapper"},Ht={class:"aioseo-seo-revisions-comparison__item-meta__author"},Pt=x(()=>n("span",null," Revision by ",-1)),kt=x(()=>n("div",{class:"aioseo-seo-revisions-comparison__item-meta__note"}," SEO Revision note ",-1)),Ft=x(()=>n("button",{class:"aioseo-seo-revisions-comparison__item-meta__btn-edit-note"}," Edit Note ",-1)),Et=x(()=>n("div",{class:"aioseo-seo-revisions-comparison__item-meta__date"}," 1 week ago (2 Dec, 2022 @ 18:28:57) ",-1)),Ct={class:"aioseo-seo-revisions-comparison__item-meta__col"},Bt={__name:"ItemMeta",setup(e){const{currentUser:t}=B(S());return(s,r)=>(a(),l("div",wt,[n("div",xt,[n("div",Rt,[p(y(L),{src:y(t).avatar.url,size:y(t).avatar.size},null,8,["src","size"])])]),n("div",Tt,[n("div",Nt,[n("div",Ht,[Pt,n("span",null,m(y(t).display_name),1)]),kt,Ft]),Et]),n("div",Ct,[P(s.$slots,"btn-restore",{},void 0,!0)])]))}},Mt=g(Bt,[["__scopeId","data-v-2c5e7d56"]]);const Dt={},Lt={class:"aioseo-seo-revisions-item-diff"},Ot=W('<h3 data-v-3d55fc94>SEO Title</h3><div data-v-3d55fc94><table class="diff is-split-view" data-v-3d55fc94><tbody data-v-3d55fc94><tr data-v-3d55fc94><td class="diff-deletedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-minus" data-v-3d55fc94></span><span class="tag" data-v-3d55fc94>Post Title</span><span class="tag" data-v-3d55fc94>Separator</span><del data-v-3d55fc94><span class="tag" data-v-3d55fc94>Site Title</span></del></td><td class="diff-addedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-plus" data-v-3d55fc94></span><span class="tag" data-v-3d55fc94>Post Title</span><span class="tag" data-v-3d55fc94>Separator</span><ins data-v-3d55fc94><span class="tag" data-v-3d55fc94>Tagline</span></ins></td></tr></tbody></table></div><h3 data-v-3d55fc94>SEO Description</h3><div data-v-3d55fc94><table class="diff is-split-view" data-v-3d55fc94><tbody data-v-3d55fc94><tr data-v-3d55fc94><td class="diff-deletedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-minus" data-v-3d55fc94></span><del data-v-3d55fc94><span data-v-3d55fc94>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s.</span></del></td><td class="diff-addedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-plus" data-v-3d55fc94></span><ins data-v-3d55fc94><span data-v-3d55fc94>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s.</span></ins></td></tr></tbody></table></div><h3 data-v-3d55fc94>Focus Keyphrase</h3><div data-v-3d55fc94><table class="diff is-split-view" data-v-3d55fc94><tbody data-v-3d55fc94><tr data-v-3d55fc94><td class="diff-deletedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-minus" data-v-3d55fc94></span><del data-v-3d55fc94><span data-v-3d55fc94>Apple Pie</span></del></td><td class="diff-addedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-plus" data-v-3d55fc94></span><ins data-v-3d55fc94><span data-v-3d55fc94>Apple Pie</span></ins></td></tr></tbody></table></div><h3 data-v-3d55fc94>Additional Keyphrases</h3><div data-v-3d55fc94><table class="diff is-split-view" data-v-3d55fc94><tbody data-v-3d55fc94><tr data-v-3d55fc94><td class="diff-deletedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-minus" data-v-3d55fc94></span><del data-v-3d55fc94><span data-v-3d55fc94>Assistance</span></del><br data-v-3d55fc94><del data-v-3d55fc94><span data-v-3d55fc94>Explanation</span></del><br data-v-3d55fc94><del data-v-3d55fc94><span data-v-3d55fc94>Inspector</span></del><br data-v-3d55fc94><del data-v-3d55fc94><span data-v-3d55fc94>Championship</span></del><br data-v-3d55fc94><span data-v-3d55fc94>Smile</span></td><td class="diff-addedline" data-v-3d55fc94><span aria-hidden="true" class="dashicons dashicons-plus" data-v-3d55fc94></span><ins data-v-3d55fc94><span data-v-3d55fc94>Perspective</span></ins><br data-v-3d55fc94><ins data-v-3d55fc94><span data-v-3d55fc94>Family</span></ins><br data-v-3d55fc94><ins data-v-3d55fc94><span data-v-3d55fc94>Priority</span></ins><br data-v-3d55fc94><ins data-v-3d55fc94><span data-v-3d55fc94>Independence</span></ins><br data-v-3d55fc94><span data-v-3d55fc94>Smile</span></td></tr></tbody></table></div>',8),Vt=[Ot];function At(e,t){return a(),l("div",Lt,Vt)}const Ut=g(Dt,[["render",At],["__scopeId","data-v-3d55fc94"]]);const jt={components:{Controls:It,CoreBlur:ie,ItemMeta:Mt,ItemsDiff:Ut,SeoRevisionsUpsell:se},data(){return{strings:{compareRevisionsOf:this.$t.__("Compare Revisions of",this.$td),goToEditor:this.$t.__("Go to editor",this.$td)}}}},zt={class:"aioseo-seo-revisions-comparison"},Kt={class:"long-header"},Wt={class:"aioseo-seo-revisions-comparison__item-meta-wrapper"},qt={class:"aioseo-seo-revisions-comparison__diff"};function Gt(e,t,s,r,o,i){const c=h("controls"),d=h("base-button"),_=h("item-meta"),R=h("items-diff"),T=h("core-blur"),N=h("seo-revisions-upsell");return a(),l("div",zt,[n("h1",Kt,[u(m(o.strings.compareRevisionsOf)+" “ ",1),n("a",{href:"#",onClick:t[0]||(t[0]=f(()=>{},["prevent"]))}," 8 Link Building Strategies You Need to Know "),u(" ” ")]),n("a",{href:"#",onClick:t[1]||(t[1]=f(()=>{},["prevent"]))}," ← "+m(o.strings.goToEditor),1),p(c),p(T,null,{default:b(()=>[n("div",Wt,[p(_,null,{"btn-restore":b(()=>[p(d,{size:"small-table",disabled:!0},{default:b(()=>[u(" Restore This Revision ")]),_:1})]),_:1})]),n("div",qt,[p(R)])]),_:1}),p(N,{"parent-component-context":"comparison-ui"})])}const Xt=g(jt,[["render",Gt],["__scopeId","data-v-4dbffcec"]]),Jt={class:"wrap"},Ps={__name:"Main",setup(e){const{isUnlicensed:t}=B(G());return(s,r)=>(a(),l("div",Jt,[y(t)?(a(),$(y(Xt),{key:1})):(a(),$(y(lt),{key:0}))]))}};export{Ps as default};
