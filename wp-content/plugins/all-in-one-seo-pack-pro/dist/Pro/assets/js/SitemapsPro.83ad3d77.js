import{a as A,c as b,q as N,u as q}from"./links.138c5ae5.js";import{a as k}from"./addons.3740efb6.js";import{g as Z}from"./params.f0608262.js";import{C as B}from"./index.63c9ec9d.js";import{C as I,S as T}from"./Caret.833cbb47.js";import{r as c,o as a,c as l,a as n,e as C,y as i,b as o,d as h,w as u,C as f,n as y,g,f as w}from"./vue.runtime.esm-bundler.a2ae84e1.js";import{_ as p}from"./_plugin-vue_export-helper.d7c6d548.js";/* empty css                                            *//* empty css                                              */import"./default-i18n.cb62c1e5.js";import"./constants.3cff9bad.js";import{U as L}from"./Url.de5868ac.js";import{C as Y}from"./Index.7805c951.js";import{C as F}from"./Tooltip.f932ed03.js";const z={setup(){return{addonsStore:A(),licenseStore:b(),pluginsStore:N(),rootStore:q()}},mixins:[L],components:{CoreAlert:B,CoreLoader:I,CoreModal:Y,CoreTooltip:F,SvgClose:T},props:{feature:{type:Object,required:!0},canActivate:{type:Boolean,default(){return!0}},canManage:{type:Boolean,default(){return!1}},staticCard:Boolean},data(){return{addons:k,showNetworkModal:!1,failed:!1,loading:!1,activated:!1,featureUpgrading:!1,strings:{version:this.$t.__("Version",this.$td),updateToVersion:this.$t.__("Update to version",this.$td),activated:this.$t.__("Activated",this.$td),deactivated:this.$t.__("Deactivated",this.$td),notInstalled:this.$t.__("Not Installed",this.$td),upgradeToPro:this.$t.__("Upgrade to Pro",this.$td),upgradeYourPlan:this.$t.__("Upgrade Your Plan",this.$td),updateFeature:this.$t.__("Update Addon",this.$td),permissionWarning:this.$t.__("You currently don't have permission to update this addon. Please ask a site administrator to update.",this.$td),manage:this.$t.__("Manage",this.$td),activateError:this.$t.__("An error occurred while activating the addon. Please upload it manually or contact support for more information.",this.$td),updateRequired:this.$t.sprintf(this.$t.__("An update is required for this addon to continue to work with %1$s %2$s.",this.$td),"AIOSEO","Pro"),areYouSureNetworkChange:this.$t.__("This is a network-wide change.",this.$td),yesProcessNetworkChange:this.$t.__("Yes, process this network change",this.$td),noChangedMind:this.$t.__("No, I changed my mind",this.$td)}}},computed:{networkChangeMessage(){return this.activated?this.$t.__("Are you sure you want to activate this addon across the network?",this.$td):this.$t.__("Are you sure you want to deactivate this addon across the network?",this.$td)}},methods:{closeNetworkModal(t=!1){this.activated=t?this.activated:!this.activated,this.showNetworkModal=!1,t&&this.actuallyProcessStatusChange(t)},processStatusChange(){if(this.activated=!this.activated,this.rootStore.aioseo.data.isNetworkAdmin){this.showNetworkModal=!0;return}this.actuallyProcessStatusChange()},actuallyProcessStatusChange(){this.failed=!1,this.loading=!0;const t=this.activated?"installPlugins":"deactivatePlugins";this.pluginsStore[t]([{plugin:this.feature.basename}]).then(r=>{this.loading=!1,r.body.failed.length&&(this.activated=!this.activated,this.failed=!0)}).catch(()=>{this.loading=!1,this.activated=!this.activated})},processUpgradeFeature(){this.failed=!1,this.featureUpgrading=!0;const t=k.getAddon(this.feature.sku);this.pluginsStore.upgradePlugins([{plugin:this.feature.sku}]).then(r=>{if(this.featureUpgrading=!1,r.body.failed.length){this.activated=!1,this.failed=!0;return}this.activated=!0;const e=r.body.completed[t.sku];t.hasMinimumVersion=!0,t.isActive=!0,t.installedVersion=e.installedVersion,this.addonsStore.updateAddon(t)}).catch(()=>{this.featureUpgrading=!1,this.activated=!1})}},mounted(){this.feature.isActive&&(this.activated=!0);const t=Z();!this.activated&&t["aioseo-activate"]&&t["aioseo-activate"]===this.feature.sku&&(this.loading=!0,this.activated=!0,this.pluginsStore.installPlugins([{plugin:this.feature.basename}]).then(()=>this.loading=!1).catch(()=>{this.loading=!1,this.activated=!this.activated}))}},R={class:"aioseo-feature-card"},E={class:"feature-card-header"},O={class:"feature-card-description"},x={key:0,class:"learn-more"},D=["href"],G=["href"],W={key:1,class:"learn-more"},j=["href"],J=["href"],K={key:0,class:"feature-card-install-activate"},Q={key:1,class:"version"},X={class:"status"},$={key:1,class:"feature-card-upgrade-cta"},ee={key:0},te={key:1},se={key:2,class:"feature-card-upgrade-cta"},ae={class:"version"},re={key:0},ie={class:"aioseo-modal-body"},oe={class:"reset-description"};function ne(t,r,e,v,s,d){const V=c("core-alert"),M=c("core-loader"),U=c("base-toggle"),_=c("base-button"),S=c("core-tooltip"),H=c("svg-close"),P=c("core-modal");return a(),l("div",R,[n("div",{class:y(["feature-card-body",{static:e.staticCard}])},[n("div",E,[C(t.$slots,"title")]),n("div",O,[C(t.$slots,"description"),(!s.activated||e.feature.requiresUpgrade)&&!e.staticCard?(a(),l("div",x,[n("a",{href:t.$links.utmUrl("feature-manager-addon-link",e.feature.sku,e.feature.learnMoreUrl),target:"_blank"},i(t.$constants.GLOBAL_STRINGS.learnMore),9,D),n("a",{href:t.$links.utmUrl("feature-manager-addon-link",e.feature.sku,e.feature.learnMoreUrl),class:"no-underline",target:"_blank"}," →",8,G)])):o("",!0),e.feature.manageUrl&&(s.activated&&!e.feature.requiresUpgrade||e.staticCard)&&e.canManage?(a(),l("div",W,[n("a",{href:t.getHref(e.feature.manageUrl)},i(s.strings.manage),9,j),n("a",{href:t.getHref(e.feature.manageUrl),class:"no-underline"}," → ",8,J)])):o("",!0),s.failed?(a(),h(V,{key:2,class:"install-failed",type:"red"},{default:u(()=>[f(i(s.strings.activateError),1)]),_:1})):o("",!0)])],2),e.canActivate?(a(),l("div",{key:0,class:y(["feature-card-footer",{"upgrade-required":e.feature.requiresUpgrade||!v.licenseStore.license.isActive}])},[!e.feature.requiresUpgrade&&v.licenseStore.license.isActive&&(!e.feature.installed||e.feature.hasMinimumVersion)?(a(),l("div",K,[s.loading?(a(),h(M,{key:0,dark:""})):o("",!0),!s.loading&&e.feature.installedVersion?(a(),l("span",Q,i(s.strings.version)+" "+i(e.feature.installedVersion),1)):o("",!0),n("span",X,i(s.activated?s.strings.activated:e.feature.installed||e.feature.canInstall?s.strings.deactivated:s.strings.notInstalled),1),e.feature.installed||e.feature.canInstall?(a(),h(U,{key:2,modelValue:s.activated,"onUpdate:modelValue":d.processStatusChange},null,8,["modelValue","onUpdate:modelValue"])):o("",!0)])):o("",!0),e.feature.requiresUpgrade||!v.licenseStore.license.isActive?(a(),l("div",$,[g(_,{type:"green",size:"medium",tag:"a",href:t.$isPro?t.$links.getUpsellUrl("feature-manager-upgrade",e.feature.sku,"pricing"):t.$links.getUpsellUrl("feature-manager-upgrade",e.feature.sku,"liteUpgrade"),target:"_blank"},{default:u(()=>[t.$isPro?(a(),l("span",ee,i(s.strings.upgradeYourPlan),1)):o("",!0),t.$isPro?o("",!0):(a(),l("span",te,i(s.strings.upgradeToPro),1))]),_:1},8,["href"])])):o("",!0),t.$isPro&&!e.feature.requiresUpgrade&&e.feature.installed&&!e.feature.hasMinimumVersion?(a(),l("div",se,[s.activated&&!s.loading?(a(),h(S,{key:0},{tooltip:u(()=>[f(i(s.strings.updateRequired)+" ",1),s.addons.userCanUpdate(e.feature.sku)?o("",!0):(a(),l("strong",re,i(s.strings.permissionWarning),1))]),default:u(()=>[n("span",ae,i(s.strings.updateToVersion)+" "+i(e.feature.minimumVersion),1)]),_:1})):o("",!0),g(_,{type:"blue",size:"medium",onClick:d.processUpgradeFeature,loading:s.featureUpgrading,disabled:!s.addons.userCanUpdate(e.feature.sku)},{default:u(()=>[f(i(s.strings.updateFeature),1)]),_:1},8,["onClick","loading","disabled"])])):o("",!0)],2)):o("",!0),s.showNetworkModal?(a(),h(P,{key:1,"no-header":"",onClose:r[4]||(r[4]=m=>d.closeNetworkModal(!1))},{body:u(()=>[n("div",ie,[n("button",{class:"close",onClick:r[1]||(r[1]=w(m=>d.closeNetworkModal(!1),["stop"]))},[g(H,{onClick:r[0]||(r[0]=w(m=>d.closeNetworkModal(!1),["stop"]))})]),n("h3",null,i(s.strings.areYouSureNetworkChange),1),n("div",oe,i(d.networkChangeMessage),1),g(_,{type:"blue",size:"medium",onClick:r[2]||(r[2]=m=>d.closeNetworkModal(!0))},{default:u(()=>[f(i(s.strings.yesProcessNetworkChange),1)]),_:1}),g(_,{type:"gray",size:"medium",onClick:r[3]||(r[3]=m=>d.closeNetworkModal(!1))},{default:u(()=>[f(i(s.strings.noChangedMind),1)]),_:1})])]),_:1})):o("",!0)])}const qe=p(z,[["render",ne]]),le={},de={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue=n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 15H7C5.35 15 4 13.65 4 12C4 10.35 5.35 9 7 9H11V7H7C4.24 7 2 9.24 2 12C2 14.76 4.24 17 7 17H11V15ZM17 7H13V9H17C18.65 9 20 10.35 20 12C20 13.65 18.65 15 17 15H13V17H17C19.76 17 22 14.76 22 12C22 9.24 19.76 7 17 7ZM16 11H8V13H16V11Z",fill:"currentColor"},null,-1),ce=[ue];function he(t,r){return a(),l("svg",de,ce)}const Ze=p(le,[["render",he]]),fe={},ge={viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-sitemaps-pro"},_e=n("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.45 3.5H4.55C3.96667 3.5 3.5 3.96667 3.5 4.55V23.45C3.5 23.9167 3.96667 24.5 4.55 24.5H23.45C23.9167 24.5 24.5 23.9167 24.5 23.45V4.55C24.5 3.96667 23.9167 3.5 23.45 3.5ZM10.5 8.16667H8.16667V10.5H10.5V8.16667ZM19.8333 8.16667H12.8333V10.5H19.8333V8.16667ZM19.8333 12.8333H12.8333V15.1667H19.8333V12.8333ZM12.8333 17.5H19.8333V19.8333H12.8333V17.5ZM8.16667 12.8333H10.5V15.1667H8.16667V12.8333ZM10.5 17.5H8.16667V19.8333H10.5V17.5ZM5.83333 22.1667H22.1667V5.83333H5.83333V22.1667Z",fill:"currentColor"},null,-1),me=[_e];function ve(t,r){return a(),l("svg",ge,me)}const Be=p(fe,[["render",ve]]);export{qe as C,Ze as S,Be as a};
